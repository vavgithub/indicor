<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .carousel-container {
            position: relative;
            width: 600px;
            /* Adjust as needed */
            height: 500px;
            /* Adjust as needed */
            margin: 0 auto;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #000;
            /* Example background */
        }

        .illustration-container {
            position: relative;
            width: 100%;
            height: 100%;
            perspective: 1000px;
            /* Enables 3D transforms if needed */
        }

        .illustration-item {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            transition: transform 0.5s ease, opacity 0.5s ease;
        }

        .illustration-item img {
            display: block;
            width: 200px;
            /* Adjust sizes as you see fit */
        }

        .nav-button {
            background: #fff;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            z-index: 10;
        }

        .globe-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .globe-container img {
            width: 100px;
            height: auto;
            transition: transform 1s linear;
            /* For smooth spin */
        }


        /* You will dynamically apply transform and scale properties via JavaScript */
    </style>
</head>

<body>
    <div class="carousel-container">
        <button class="nav-button left-button">&larr;</button>

        <div class="illustration-container">
             <div class="globe-container">
            <img src="yellow-globe.svg" alt="Yellow Globe">
        </div>
            <div class="illustration-item">
                <img src="illustration1.svg" alt="Illustration 1">
            </div>
            <div class="illustration-item">
                <img src="illustration2.svg" alt="Illustration 2">
            </div>
            <div class="illustration-item">
                <img src="illustration3.svg" alt="Illustration 3">
            </div>
            <div class="illustration-item">
                <img src="illustration1.svg" alt="Illustration 1">
            </div>
            <div class="illustration-item">
                <img src="illustration2.svg" alt="Illustration 2">
            </div>

            <!-- Add more illustrations as needed -->
        </div>

        <button class="nav-button right-button">&rarr;</button>
    </div>

    <script>
        const items = document.querySelectorAll('.illustration-item');
        let activeIndex = 0; // The index of the front/center item

        const globeImg = document.querySelector('.globe-container img');
        let globeRotation = 0;

        // Positions array - define how each relative position should look
        // For example, for a small carousel of 5 items, define 5 states:
        // indexOffset: -2, -1, 0, 1, 2 (left to right around the circle)
        // const positions = [
        //     { x: -200, scale: 0.4, zIndex: 1 },
        //     { x: -100, scale: 0.8, zIndex: 2 },
        //     { x: 0, y:10, scale: 1.5, zIndex: 3 }, // front and center
        //     { x: 100, scale: 0.8, zIndex: 2 },
        //     { x: 200, scale: 0.4, zIndex: 1 }
        // ];

        const positions = [
            { x: -200, y: 0, scale: 0.4, zIndex: 1 },
            { x: -120, y: 10, scale: 0.8, zIndex: 2 },
            { x: 0, y: 40, scale: 1.5, zIndex: 3 }, // center item with a downward shift
            { x: 120, y: 10, scale: 0.8, zIndex: 2 },
            { x: 200, y: 0, scale: 0.4, zIndex: 1 }
        ];

        function updateCarousel() {
            // We assume items.length = 5 for this example
            const len = items.length;

            for (let i = 0; i < len; i++) {
                // Calculate each item's position relative to the active index
                // This gives us a circular offset
                const offset = (i - activeIndex) % len;

                // Convert offset to a positive number if needed
                const normalizedOffset = (offset + len) % len;

                // Apply the defined transform from our positions array
                // The center (active) item is at positions[2] in this setup
                // This means offset 0 => front, offset 1 => right, offset -1 => left, etc.
                // We'll map offset to our positions array. For a 5-item setup:
                // offset = 0 => positions[2]
                // offset = 1 => positions[3]
                // offset = 2 => positions[4]
                // offset = -1 or (len-1) => positions[1]
                // offset = -2 or (len-2) => positions[0]

                let posIndex;
                if (normalizedOffset === 0) posIndex = 2;
                else if (normalizedOffset === 1) posIndex = 3;
                else if (normalizedOffset === 2) posIndex = 4;
                else if (normalizedOffset === 3) posIndex = 0;
                else if (normalizedOffset === 4) posIndex = 1;

                const { x, y, scale, zIndex } = positions[posIndex];

                items[i].style.zIndex = zIndex;
                // items[i].style.transform = `translate(-50%, -50%) translateX(${x}px) scale(${scale})`;
                items[i].style.transform = `translate(-50%, -50%) translateY(${y}%) translateX(${x}px) scale(${scale})`;
                // Apply opacity if desired
                items[i].style.opacity = normalizedOffset === 0 ? 1 : 0.8;

                // Apply blur for far left and far right
                // In our mapping:
                // - far left is posIndex = 0 (normalizedOffset 3)
                // - far right is posIndex = 4 (normalizedOffset 2)
                if (posIndex === 0 || posIndex === 4) {
                    items[i].style.filter = 'blur(4px)'; // Adjust the blur amount as needed
                } else {
                    items[i].style.filter = 'none';
                }
            }
        }

        // Initial call
        updateCarousel();

        // Event listeners for buttons
        document.querySelector('.left-button').addEventListener('click', () => {
            // Move carousel to the left: increment activeIndex
            activeIndex = (activeIndex + 1) % items.length;
            globeRotation += 30; // rotate by 30 degrees
            globeImg.style.transform = `rotateZ(${globeRotation}deg)`;
            updateCarousel();
        });

        document.querySelector('.right-button').addEventListener('click', () => {
            // Move carousel to the right: decrement activeIndex
            activeIndex = (activeIndex - 1 + items.length) % items.length;
            globeRotation -= 30;
            globeImg.style.transform = `rotateZ(${globeRotation}deg)`;
            updateCarousel();
        });

    </script>
</body>

</html>